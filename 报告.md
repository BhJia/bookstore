## 当代数据管理系统书店项目报告

| 课程名称：当代数据管理系统 | 年级：20级               |
| ------------------------------ | ---------------------------- |
| **指导教师：周煊**    | **组员：贾柏寒  杨一帆 薛沁晨** |

#### 一.相关功能实验要求

实现一个提供网上购书功能的网站后端。
网站支持书商在上面开商店，购买者可以通过网站购买。
买家和卖家都可以注册自己的账号。
一个卖家可以开一个或多个网上商店，
买家可以为自已的账户充值，在任意商店购买图书。
支持 下单->付款->发货->收货 流程。

1.实现对应接口的功能，见项目的doc文件夹下面的.md文件描述 （60%）

其中包括：

1)用户权限接口，如注册、登录、登出、注销

2)买家用户接口，如充值、下单、付款

3)卖家用户接口，如创建店铺、填加书籍信息及描述、增加库存

通过对应的功能测试，所有test case都pass 

2.为项目添加其它功能 ：（40%）

1)实现后续的流程 
发货 -> 收货

2)搜索图书 
用户可以通过关键字搜索，参数化的搜索方式；
如搜索范围包括，题目，标签，目录，内容；全站搜索或是当前店铺搜索。
如果显示结果较大，需要分页
(使用全文索引优化查找)

3)订单状态，订单查询和取消定单
用户可以查自已的历史订单，用户也可以取消订单。
取消定单可由买家主动地取消定单，或者买家下单后，经过一段时间超时仍未付款，定单也会自动取消。 



#### 二. 关系数据库设计及初始化

**1.概念设计**



**2.ER图**



**3.初始化**

① 利用SQLalchemy+ORM连接本地Postgresql数据库



② 建立表格

**book表**

```python
# 定义原始的图书表(按照markdown文件中的Schema)
class book(Base):
    __tablename__ = 'book'
    id = Column(Integer, primary_key=True, autoincrement=True)
    title = Column(Text, nullable=False)
    author = Column(Text, nullable=True)
    publisher = Column(Text, nullable=True)
    original_title = Column(Text, nullable=True)
    translator = Column(Text, nullable=True)
    pub_year = Column(Text, nullable=True)
    pages = Column(Integer, nullable=True)
    price = Column(Integer, nullable=True)
    binding = Column(Text, nullable=True)
    isbn = Column(Text, nullable=True)
    author_intro = Column(Text, nullable=True)
    book_intro = Column(Text, nullable=True)
    content = Column(Text, nullable=True)
    tags = Column(Text, nullable=True)
    # LargeBinary类型可以存储Blob类型文件
    picture = Column(LargeBinary, nullable=True)
```

字段解释:





③ 连接原先的sqlite数据库并将数据存储到postgresql数据库中







#### 三.功能实现

**1.用户权限接口相关功能**

① 注册

实现思路:



② 检查密码



③ 登陆



④ 登出



⑤ 注销



⑥ 修改密码



**2.买家用户接口相关功能**

① 下单



② 支付



③ 充值



④ 收货



⑤ 查看历史订单



⑥ 取消订单



⑦ 搜索图书



⑧ 订单超时自动取消





**3.卖家用户接口相关功能**

① 添加书籍

实现思路:

1.

2.

3.



② 增加库存



③ 发货



④ 创建店铺



#### 四.功能测试



#### 五.优化



#### 六.协作与版本管理



#### 七.总结
